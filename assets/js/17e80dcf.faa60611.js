"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[4395],{3905:(e,t,a)=>{a.d(t,{Zo:()=>l,kt:()=>m});var o=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=o.createContext({}),d=function(e){var t=o.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},l=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=d(a),u=n,m=p["".concat(s,".").concat(u)]||p[u]||g[u]||r;return a?o.createElement(m,i(i({ref:t},l),{},{components:a})):o.createElement(m,i({ref:t},l))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[p]="string"==typeof e?e:n,i[1]=c;for(var d=2;d<r;d++)i[d]=a[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}u.displayName="MDXCreateElement"},12803:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>g,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var o=a(87462),n=(a(67294),a(3905));const r={id:"datadog",title:"Datadog",description:"Use Datadog as the trace data store for Tracetest. Configure the OpenTelemetry Collector to receive traces and forward them to both Tracetest and Datadog.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},i=void 0,c={unversionedId:"configuration/connecting-to-data-stores/datadog",id:"configuration/connecting-to-data-stores/datadog",title:"Datadog",description:"Use Datadog as the trace data store for Tracetest. Configure the OpenTelemetry Collector to receive traces and forward them to both Tracetest and Datadog.",source:"@site/docs/configuration/connecting-to-data-stores/datadog.mdx",sourceDirName:"configuration/connecting-to-data-stores",slug:"/configuration/connecting-to-data-stores/datadog",permalink:"/configuration/connecting-to-data-stores/datadog",draft:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/configuration/connecting-to-data-stores/datadog.mdx",tags:[],version:"current",frontMatter:{id:"datadog",title:"Datadog",description:"Use Datadog as the trace data store for Tracetest. Configure the OpenTelemetry Collector to receive traces and forward them to both Tracetest and Datadog.",keywords:["tracetest","trace-based testing","observability","distributed tracing","testing"],image:"https://res.cloudinary.com/djwdcmwdz/image/upload/v1698686403/docs/Blog_Thumbnail_14_rsvkmo.jpg"},sidebar:"tutorialSidebar",previous:{title:"Azure App Insights",permalink:"/configuration/connecting-to-data-stores/azure-app-insights"},next:{title:"Dynatrace",permalink:"/configuration/connecting-to-data-stores/dynatrace"}},s={},d=[{value:"Configuring OpenTelemetry Collector to Send Traces to Both Datadog and Tracetest",id:"configuring-opentelemetry-collector-to-send-traces-to-both-datadog-and-tracetest",level:2},{value:"Configure Tracetest to Use Datadog as a Trace Data Store",id:"configure-tracetest-to-use-datadog-as-a-trace-data-store",level:2},{value:"Connect Tracetest to Datadog with the Web UI",id:"connect-tracetest-to-datadog-with-the-web-ui",level:2},{value:"Connect Tracetest to Datadog with the CLI",id:"connect-tracetest-to-datadog-with-the-cli",level:2}],l={toc:d},p="wrapper";function g(e){let{components:t,...r}=e;return(0,n.kt)(p,(0,o.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"If you want to use ",(0,n.kt)("a",{parentName:"p",href:"https://www.datadoghq.com/"},"Datadog")," as the trace data store, you'll configure the OpenTelemetry Collector to receive traces from your system and then send them to both Tracetest and Datadog. And, you don't have to change your existing pipelines to do so."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"Examples of configuring Tracetest with Datadog can be found in the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/kubeshop/tracetest/tree/main/examples"},(0,n.kt)("inlineCode",{parentName:"a"},"examples")," folder of the Tracetest GitHub repo"),".")),(0,n.kt)("h2",{id:"configuring-opentelemetry-collector-to-send-traces-to-both-datadog-and-tracetest"},"Configuring OpenTelemetry Collector to Send Traces to Both Datadog and Tracetest"),(0,n.kt)("p",null,"In your OpenTelemetry Collector config file:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Set the ",(0,n.kt)("inlineCode",{parentName:"li"},"exporter")," to ",(0,n.kt)("inlineCode",{parentName:"li"},"otlp/tracetest")),(0,n.kt)("li",{parentName:"ul"},"Set the ",(0,n.kt)("inlineCode",{parentName:"li"},"endpoint")," to your Tracetest instance on port ",(0,n.kt)("inlineCode",{parentName:"li"},"4317"))),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"If you are running Tracetest with Docker, and Tracetest's service name is ",(0,n.kt)("inlineCode",{parentName:"p"},"tracetest"),", then the endpoint might look like this ",(0,n.kt)("inlineCode",{parentName:"p"},"http://tracetest:4317"))),(0,n.kt)("p",null,"Additionally, add another config:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Set the ",(0,n.kt)("inlineCode",{parentName:"li"},"exporter")," to ",(0,n.kt)("inlineCode",{parentName:"li"},"datadog"),"."),(0,n.kt)("li",{parentName:"ul"},"Set the ",(0,n.kt)("inlineCode",{parentName:"li"},"api")," pointing to your Datadog account."),(0,n.kt)("li",{parentName:"ul"},"Set the ",(0,n.kt)("inlineCode",{parentName:"li"},"site")," to Datadog API ",(0,n.kt)("inlineCode",{parentName:"li"},"datadoghq.com"),"."),(0,n.kt)("li",{parentName:"ul"},"Set the ",(0,n.kt)("inlineCode",{parentName:"li"},"key")," to your Datadog API key.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"# collector.config.yaml\n\n# If you already have receivers declared, you can just ignore\n# this one and still use yours instead.\nreceivers:\n  otlp:\n    protocols:\n      http:\n      grpc:\n\nprocessors:\n  # This configuration is needed to guarantee that the data is sent correctly to Datadog\n  batch:\n    send_batch_max_size: 100\n    send_batch_size: 10\n    timeout: 10s\n\nexporters:\n  # OTLP for Tracetest\n  # Send traces to Tracetest.\n  # Read more in docs here: https://docs.tracetest.io/configuration/connecting-to-data-stores/opentelemetry-collector\n  otlp/tracetest:\n    endpoint: tracetest:4317\n    tls:\n      insecure: true\n\n  # Datadog exporter\n  # One example on how to set up a collector configuration for Datadog can be seen here:\n  # https://docs.datadoghq.com/opentelemetry/otel_collector_datadog_exporter/?tab=onahost\n  datadog:\n    api:\n      site: datadoghq.com\n      key: ${DATADOG_API_KEY} # Add here you API key for Datadog\n\nservice:\n  pipelines:\n    traces/tracetest:\n      receivers: [otlp]\n      processors: [batch]\n      exporters: [otlp/tracetest] # exporter sending traces to your Tracetest instance\n    traces/datadog:\n      receivers: [otlp]\n      processors: [batch]\n      exporters: [datadog] # exporter sending traces to directly to Datadog\n")),(0,n.kt)("h2",{id:"configure-tracetest-to-use-datadog-as-a-trace-data-store"},"Configure Tracetest to Use Datadog as a Trace Data Store"),(0,n.kt)("p",null,"Configure your Tracetest instance to expose an ",(0,n.kt)("inlineCode",{parentName:"p"},"otlp")," endpoint to make it aware it will receive traces from the OpenTelemetry Collector. This will expose Tracetest's trace receiver on port ",(0,n.kt)("inlineCode",{parentName:"p"},"4317"),"."),(0,n.kt)("h2",{id:"connect-tracetest-to-datadog-with-the-web-ui"},"Connect Tracetest to Datadog with the Web UI"),(0,n.kt)("p",null,"In the Web UI, (1) open Settings, and, on the (2) Configure Data Store tab, select (3) Datadog."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Datadog",src:a(57319).Z,width:"2848",height:"1562"})),(0,n.kt)("h2",{id:"connect-tracetest-to-datadog-with-the-cli"},"Connect Tracetest to Datadog with the CLI"),(0,n.kt)("p",null,"Or, if you prefer using the CLI, you can use this file config."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"type: DataStore\nspec:\n  name: Datadog pipeline\n  type: datadog\n  default: true\n")),(0,n.kt)("p",null,"Proceed to run this command in the terminal and specify the file above."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"tracetest apply datastore -f my/data-store/file/location.yaml\n")),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"To learn more, ",(0,n.kt)("a",{parentName:"p",href:"/examples-tutorials/recipes/running-tracetest-with-datadog"},"read the recipe for running a sample app with Datadog and Tracetest"),".")))}g.isMDXComponent=!0},57319:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/configure-datadog-0.11.3-7a90065a744e45034fbaad8e274b5f43.png"}}]);